<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="format-detection"  content="telephone=no"> 
    <meta http-equiv="x-rim-auto-match" content="none">
    <title>判断手机是否安装微信</title>
    <script src="https://cdn.bootcss.com/zepto/1.2.0/zepto.min.js"></script>
</head>
<body>
<a href="tel:13764567708" class="a">移动WEB页面JS一键拨打号码咨询功能</a><br/>
<a href="sms:13764567708">移动WEB页面JS一键发送短信咨询功能</a><br/>
<a href="wtai://wp//mc;13764567708">拨打10086 </a>  <a href="wtai://wp/ap;13764567708;">将10086存储至电话簿 </a><br/>
<a href="skype:+8613240020366?call">呼叫skype</a><br/><br/><br/>
<script>
var openApp = function(openUrl, callback) {
    //检查app是否打开
    function checkOpen(cb){
        var _clickTime = +(new Date());
        function check(elsTime) {
            if ( elsTime > 3000 || document.hidden || document.webkitHidden) {
                cb(1);
            } else {
                cb(0);
            }
        }
        //启动间隔20ms运行的定时器，并检测累计消耗时间是否超过3000ms，超过则结束
        var _count = 0, intHandle;
        intHandle = setInterval(function(){
            _count++;        
            var elsTime = +(new Date()) - _clickTime;
            if (_count>=100 || elsTime > 3000 ) {
                clearInterval(intHandle);
                check(elsTime);
            }
        }, 20);
    }
   
    //在iframe 中打开APP
    var ifr = document.createElement('iframe');
    ifr.src = openUrl;
    ifr.style.display = 'none';

    if (callback) {
      //客户端检测微信直接跳应用宝链接
      var browser = BrowserInfo();
      //使用微链接
      var encodeUri = encodeURIComponent(openUrl);

      if (browser.isWeixin) {
        window.location.href = '你的微链url&android_schema='+encodeUri;
      }else{
        checkOpen(function(opened){
            callback && callback(opened);
        });
     
      }
    }
    
    document.body.appendChild(ifr);      
    setTimeout(function() {
        document.body.removeChild(ifr);
    }, 2000);  

}
openApp("skype://",function(data){
    console.log(data)
})
</script>
</br></br></br></br></br></br>
<a class="js-skype-item">test skype</a>
<script>
$(".js-skype-item").on("click", function () {
        testApp("skype:+8613240020366?call");
    })

    function testApp(url) {
        if (navigator.userAgent.match(/(iPhone|iPod|iPad);?/i)) {
            var loadDateTime = new Date();
            window.setTimeout(function () {
                    var timeOutDateTime = new Date();
                    if (timeOutDateTime - loadDateTime < 5000) {
                        window.location = url;
                    } else {
                        window.close();
                    }
                },
                25);
            window.location = "skype:// ";
        } else if (navigator.userAgent.match(/android/i)) {
            var state = null;
            try {
                state = window.open(url, '_self');
            } catch (e) {
            }
            if (state) {
                window.close();
            } else {
                $.alert("Sorry, this application can not be found, please try the other options.", function () {
                });
            }
        }
    }
</script>
</body>
</html>
